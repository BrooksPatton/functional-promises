(function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)})([function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0}),function(a){function d(b){if(!(this instanceof d))return new d(b);if(1!==arguments.length)throw new Error("FunctionalPromises constructor only accepts 1 callback argument");this._FP={errors:{limit:0,count:0},promise:new Promise(b),concurrencyLimit:4}}var e=c(1),f=c(2),g=c(4),h=c(5),i=c(6),j=c(7),k=c(8);Object.assign(d.prototype,h.a,i.a,j.a,k.a),d.default=d,d.all=d.prototype.all,d.thenIf=d.prototype._thenIf,d.delay=b=>d.resolve().delay(b),d.silent=b=>d.resolve().silent(b),d.chain=g.a,d.prototype.chainEnd=g.b,d.reject=d.prototype.reject,d.prototype.addStep=function(c,a){return this.steps&&this.steps.push([c,this,a]),this},d.prototype.concurrency=function(b=1/0){return this.steps?this.addStep("concurrency",[...arguments]):(this._FP.concurrencyLimit=b,this)},d.prototype.quiet=function(b=1/0){return this.steps?this.addStep("quiet",[...arguments]):(this._FP.errors={count:0,limit:b},this)},d.prototype.silent=d.prototype.quiet,d.prototype.get=function(...c){return this.steps?this.addStep("get",[...arguments]):(c=Object(f.a)(c),this.then(d=>"object"==typeof d?1===c.length?d[c[0]]:c.reduce((b,a)=>(b[a]=d[a],b),{}):d))},d.prototype.set=function(d,a){return this.steps?this.addStep("set",[...arguments]):this.then(b=>("object"==typeof b&&(b[d]=a),b))},d.prototype.catch=function(c){if(this.steps)return this.addStep("catch",[...arguments]);if(2===arguments.length)return this.catchIf(...arguments);if(!Object(f.c)(c))throw new e.b("Invalid fn argument for `.catch(fn)`. Must be a function. Currently: "+typeof c);return d.resolve(this._FP.promise.catch(a=>c(a)))},d.prototype.catchIf=function(g,a){if(this.steps)return this.addStep("catchIf",[...arguments]);if(!Object(f.c)(a))throw new e.b("Invalid fn argument for `.catchIf(condition, fn)`. Must be a function. Currently: "+typeof a);return d.resolve(this._FP.promise.catch(b=>{if(g&&b instanceof g)return a(b);throw b}))},d.prototype.then=function(b){if(this.steps)return this.addStep("then",[...arguments]);if(!Object(f.c)(b))throw new e.b("Invalid fn argument for `.then(fn)`. Must be a function. Currently: "+typeof b);return d.resolve(this._FP.promise.then(b))},d.prototype.tap=function(c){if(this.steps)return this.addStep("tap",[...arguments]);if(!Object(f.c)(c))throw new e.b("Invalid fn argument for `.tap(fn)`. Must be a function. Currently: "+typeof c);return d.resolve(this._FP.promise.then(a=>c(a)?a:a))},d.resolve=d.prototype.resolve=function(e){return new d((a,b)=>e&&Object(f.c)(e.then)?e.then(a).catch(b):void a(e))},d.promisify=function(e){return(...a)=>new d((f,c)=>e.call(this,...a,(d,a)=>d?c(d):f(a)))},d.promisifyAll=function(c){if(!c||!Object.getPrototypeOf(c))throw new Error("Invalid Argument obj in promisifyAll(obj)");return Object.getOwnPropertyNames(c).filter(a=>"function"==typeof c[a]).reduce((c,a)=>(/Sync/.test(a)||c[`${a}Async`]||(c[`${a}Async`]=d.promisify(c[`${a}`])),c),c)},d.unpack=function(){let e,f,g=new d((a,b)=>{e=a,f=b});return{promise:g,resolve:e,reject:f}},b["default"]=d,a&&a.on&&a.on("unhandledRejection",b=>console.error("FPromises: FATAL ERROR: unhandledRejection",b))}.call(b,c(3))},function(a,b){"use strict";class c extends Error{constructor(c,d){"object"==typeof c&&(d=c,c.message&&(c=c.message)),super(c),"object"==typeof d&&Object.getOwnPropertyNames(d).forEach(b=>{this[b]=d[b]}),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}b.b=c;b.a=class extends c{}},function(a,b){"use strict";b.d=function(b){return b&&"function"==typeof b.then};b.c=function(b){return"function"==typeof b};b.b=function(b){return b&&Array.isArray(b)||"function"==typeof b[Symbol.iterator]};b.a=function(b){if(!Array.isArray(b))throw new Error("Method `flatten` requires valid array parameter");return b.reduce((c,a)=>c.concat(Array.isArray(a)?utils.flatten(a):[a]),[])}},function(a){function b(){throw new Error("setTimeout has not been defined")}function c(){throw new Error("clearTimeout has not been defined")}function d(c){if(j===setTimeout)return setTimeout(c,0);if((j===b||!j)&&setTimeout)return j=setTimeout,setTimeout(c,0);try{return j(c,0)}catch(a){try{return j.call(null,c,0)}catch(a){return j.call(this,c,0)}}}function e(d){if(k===clearTimeout)return clearTimeout(d);if((k===c||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(d);try{return k(d)}catch(a){try{return k.call(null,d)}catch(a){return k.call(this,d)}}}function f(){o&&m&&(o=!1,m.length?n=m.concat(n):p=-1,n.length&&g())}function g(){if(!o){var c=d(f);o=!0;for(var a=n.length;a;){for(m=n,n=[];++p<a;)m&&m[p].run();p=-1,a=n.length}m=null,o=!1,e(c)}}function h(c,a){this.fun=c,this.array=a}function i(){}var j,k,l=a.exports={};(function(){try{j="function"==typeof setTimeout?setTimeout:b}catch(c){j=b}try{k="function"==typeof clearTimeout?clearTimeout:c}catch(b){k=c}})();var m,n=[],o=!1,p=-1;l.nextTick=function(e){var a=Array(arguments.length-1);if(1<arguments.length)for(var b=1;b<arguments.length;b++)a[b-1]=arguments[b];n.push(new h(e,a)),1!==n.length||o||d(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(a,b,c){"use strict";b.a=function(){const d=c(0),a=d.resolve();return a.steps=[],a},b.b=function(){const h=c(0);return a=>{if(!this.steps||0>=this.steps.length)throw new g.a("No steps defined between .chain() & .chainEnd()");let i=0,{promise:j,resolve:b,reject:e}=h.unpack();for(;i<this.steps.length;){const[c,,a]=this.steps[i];j=j[c](...a),i++}return b(a),j}};var g=c(1)},function(a,b,o){"use strict";function c(d,e){const f=o(0);return this.steps?this.addStep("_find",[...arguments]):("function"==typeof d&&(e=d,d=this._FP.promise),f.resolve(d).filter(e).then(b=>null==b[0]?{item:void 0,index:-1}:{item:b[0],index:b.indexOf(b[0])}))}function d(f,e,i){const g=o(0);return this.steps?this.addStep("reduce",[...arguments]):("function"==typeof f?(i=e,e=f,f=this._FP?this._FP.promise:this):f=g.resolve(f,this),new g((b,d)=>f.then(c=>{const j=c[Symbol.iterator]();let f=0;const k=g=>{const a=j.next();return a.done?b(g):void Promise.all([g,a.value]).then(([b,a])=>k(e(b,a,f++))).catch(d)};k(i)})))}var t=o(2),u=o(1);b.a={map:function(v,p){const q=o(0);if(this.steps)return this.addStep("map",[...arguments]);1===arguments.length&&this&&this._FP&&(p=v,v=this&&this._FP&&this._FP.promise);let w=!1;const c=Math.max(1,Math.min(this&&this._FP&&this._FP.concurrencyLimit||1,4)),e=this&&this._FP&&this._FP.promise?this._FP.promise:Promise.resolve(v);let f=0,s=[],h=0;const x=[],j=new Set,k=()=>j.size>=c,l=()=>s.length>this._FP.errors.limit||h>=v.length||w,m=c=>a=>(j.delete(c),x[c]=a,a);return q.resolve(new Promise((b,d)=>{const g=c=>w?null:void(w=!0,b(c)),i=b=>w?null:void(w=!0,d(b));e.then(a=>{if(v=[...a],!Object(t.b)(a))return d(new u.a("Invalid input data passed into FP.map()"));const b=()=>{let b=null;return s.length>this._FP.errors.limit&&(b=i),l()&&(b=g),!!b&&(!!Promise.all(x).then(()=>b(x))||!0)},n=c=>{if(!w)return b()||x[h]||o(h),c},o=d=>w?null:(h++,k())?setTimeout(()=>o(d),0):x[d]?x[d]:(j.add(d),x[d]=Promise.resolve(v[d]).then(a=>p(a,d,v)).then(b=>m(d)(b)).then(n).catch(c=>{if(this._FP.errors.count++,s.push(c),s.length>this._FP.errors.limit){const a=1===s.length?c:new u.b(`Error Limit ${this._FP.errors.limit} Exceeded.
              idx=${d} errCnt=${this._FP.errors.count}`,{errors:s,results:x,ctx:this});Promise.resolve(m(d)(c)).then(()=>i(a))}else return Promise.resolve().then(()=>m(d)(c)).then(n)}),x[d]);for(;f<c&&f<v.length;)o(f++)})}))},find:function(b){return c.call(this,b).then(({item:b})=>b)},findIndex:function(b){return c.call(this,b).then(({index:b})=>b)},filter:function(c,e){return this.steps?this.addStep("filter",[...arguments]):("function"==typeof c&&(e=c,c=this._FP.promise),d(c,(d,a)=>Promise.resolve(e(a)).then(c=>c?d.concat([a]):d),[]))},reduce:d}},function(a,b,c){"use strict";var d=c(1);b.a={listen(e,...a){if("string"==typeof a&&(a=[a]),!e[e.addEventListener?"addEventListener":"on"])throw new d.a("Valid EventEmitter required.");const f=this.chainEnd();return this._FP.destroy=()=>this._FP.destroyHandles.map(b=>b()||!0).filter(b=>b).length,this._FP.destroyHandles=a.map(a=>(e[e.addEventListener?"addEventListener":"on"](a,f),()=>e[e.removeEventListener?"removeEventListener":"off"](a,f))),this}}},function(a,b,f){"use strict";function e(g=b=>b,h=b=>b,b=()=>null,c=!1){const a=f(0);return d=>a.resolve(g(d)).then(c=>c?h(d):b(d)).then(b=>c?d:b)}var d=f(2);b.a={thenIf:function(f,g,h){return this.steps?this.addStep("thenIf",[...arguments]):(1===arguments.length&&(g=f,f=b=>b),Object(d.d)(this)?this.then(a=>e(f,g,h)(a)):e(f,g,h))},tapIf:function(f,g,h){return this.steps?this.addStep("tapIf",[...arguments]):(1===arguments.length&&(g=f,f=b=>b),Object(d.d)(this)?this.then(a=>e(f,g,h,!0)(a)):e(f,g,h,!0))},_thenIf:e}},function(a,b,c){"use strict";function d(d){const g=Object.getOwnPropertyNames(d),a=g.map(a=>d[a]);return Promise.all(a).then(b=>b.reduce((b,a,c)=>{var d;const h=g[c];return Object.assign((d={},d[h]=a,d),b)},{}))}function e(d){const a=c(0);if(!Number.isInteger(d))throw new f.a("FP.delay(millisec) requires a numeric arg.");return e=>new a(a=>{setTimeout(()=>a(e),d)})}var f=c(1);b.a={all:function(e){const a=c(0);return a.resolve(Array.isArray(e)?Promise.all(e):d(e))},reject:function(b){if(b instanceof Error)return this&&(this._error=b),Promise.reject(b);throw new Error(`Reject only accepts a new instance of Error!`)},delay:function(d){const a=c(0);return this.steps?this.addStep("delay",[...arguments]):this&&this._FP?a.resolve(this.then(e(d))):e(d)()},_delay:e}}]);